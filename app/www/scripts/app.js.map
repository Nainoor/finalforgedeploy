{"version":3,"sources":["app/www/scripts/app.ts"],"names":[],"mappings":"AAAA,wDAAwD;AACxD,sEAAsE;AAEtE,IAAI,GAAG,GAAG,yJAAyJ,CAAC;AAEpK,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;IAEd,IAAI,QAAQ,GAAI;QACZ,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;QAE/B,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,0BAA0B,EAAE,KAAK,CAAC,CAAC;QACnD,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACf,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC5C,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC;IACjC,CAAC,CAAA;IAED,0BAA0B,WAAW,EAAE,UAAU,EAAE,IAAI;QAEnD,IAAI,eAAe,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,MAAM,GAAG,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QAEvE,MAAM,CAAC,KAAK,EAAE,CAAC;QAEf,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EACrC,UAAC,QAAQ;YACL,IAAI,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;YACtC,IAAI,aAAa,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,yBAAyB,CAAC,QAAQ,EAC5E,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;YAEhD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5D,CAAC,EACD,UAAC,GAAG;YACA,OAAO,CAAC,GAAG,CAAC,0BAA0B,GAAG,GAAG,CAAC,CAAC;QAClD,CAAC,CACJ,CAAC;IACN,CAAC;IAED;QAEI,IAAI,OAAO,GAAG;YACV,GAAG,EAAE,oBAAoB;YACzB,cAAc,EAAE,QAAQ;YACxB,YAAY,EAAE,QAAQ;SACzB,CAAC;QAEF,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE;YAClC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IACP,CAAC;IAED,UAAU,EAAE,CAAC;AACjB,CAAC,CAAC,CAAC","file":"app/www/scripts/app.js","sourcesContent":["///<reference path='../../typings/jquery/jquery.d.ts' />\r\n///<reference path='../../typings/view.and.data/view.and.data.d.ts' />\r\n\r\nvar urn = 'dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTEyLTI1LTEwLTAwLTI2LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL3JhY19iYXNpY19zYW1wbGVfcHJvamVjdC5ydnQ';\r\n\r\n$(document).ready(function () {\r\n\r\n    var getToken =  function() {\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        xhr.open(\"GET\", '/node/typeview/api/token', false);\r\n        xhr.send(null);\r\n        var response = JSON.parse(xhr.responseText);\r\n        return response.access_token;\r\n    }\r\n\r\n    function initializeViewer(containerId, documentId, role) {\r\n\r\n        var viewerContainer = document.getElementById(containerId);\r\n        var viewer = new Autodesk.Viewing.Private.GuiViewer3D(viewerContainer);\r\n\r\n        viewer.start();\r\n\r\n        Autodesk.Viewing.Document.load(documentId,\r\n            (document) => {\r\n                var rootItem = document.getRootItem();\r\n                var geometryItems = Autodesk.Viewing.Document.getSubItemsWithProperties(rootItem,\r\n                    { 'type': 'geometry', 'role': role }, true);\r\n\r\n                viewer.load(document.getViewablePath(geometryItems[0]));\r\n            },\r\n            (msg) => {\r\n                console.log('Error loading document: ' + msg);\r\n            }\r\n        );\r\n    }\r\n\r\n    function initialize() {\r\n\r\n        var options = {\r\n            env: 'AutodeskProduction',\r\n            getAccessToken: getToken,\r\n            refreshToken: getToken\r\n        };\r\n\r\n        Autodesk.Viewing.Initializer(options, () => {\r\n            initializeViewer('viewer', 'urn:' + urn, '3d');\r\n        });\r\n    }\r\n\r\n    initialize();\r\n});\r\n\r\n"],"sourceRoot":"/source/"}